2022.03.24 TIL

### ğŸ“Œ Live Session
- ê³ ì°¨í•¨ìˆ˜
- ```Map```
- ```Filter```
- ```Reduce```
- ```FlatMap(CompactMap)```

- ë°˜ë³µë¬¸/ì¡°ê±´ë¬¸ì´ ìˆìŒì—ë„ ê³ ì°¨í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ì¢‹ì€ì ì´ ìˆë‚˜ìš”? ìˆë‹¤ë©´ ì–´ë–¤ ì ì´ ì¢‹ì€ì§€, ì•„ë‹ˆë¼ë©´ ì–´ë–¤ ë‹¨ì ì´ ìˆëŠ”ì§€ ì´ì•¼ê¸°í•´ë´…ì‹œë‹¤.
    - ì¥ì 
        1. ì½”ë“œê°€ ê°„ê²°í•´ì§„ë‹¤.
        2. í‘œí˜„ë ¥ê³¼ ê°€ë…ì„±ì´ ì¢‹ë‹¤.
        3. ì»´íŒŒì¼ëŸ¬ ìµœì í™” ì¸¡ë©´ì—ì„œ ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.
        4. í•„ìš”í•œ ë¡œì§ì„ ì™¸ë¶€ì™€ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.(ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš° ê³ ì°¨í•¨ìˆ˜ ë‚´ë¶€ë§Œ ë³€ê²½í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.)
    - ë‹¨ì 
        1. ê³ ì°¨í•¨ìˆ˜ ì‚¬ìš©ë²•ì„ ëª¨ë¥´ë©´ ì´í•´í•˜ê¸° ì–´ë µë‹¤.
        2. íŠ¹ì • í•¨ìˆ˜ì˜ ê²½ìš° ì„±ëŠ¥ì´ ì˜¤íˆë ¤ ë” ì•ˆì¢‹ì„ ìˆ˜ ìˆë‹¤.

- ê³ ì°¨í•¨ìˆ˜ì˜ ì¥ì : ê²°ê³¼ê°’ì„ ìƒìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
___
### ğŸ“Œ ê³ ì°¨í•¨ìˆ˜ì™€ forë£¨í”„ì˜ ì†ë„ ë¹„êµ
ë§í¬: [Performance of built-in higher-order function vs. for-in loop in Swift](https://medium.com/skoumal-studio/performance-of-built-in-higher-order-function-vs-for-in-loop-in-swift-166fa41b545f)
[ìœ„ ë‚´ìš©ì„ ë²ˆì—­í•˜ê³  ì •ë¦¬í•œ ë‚´ìš©]

ì „ì œ ì¡°ê±´
- í¬ê¸°ê°€ 10,000,000ì¸ ë°ì´í„°
- ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” 30íšŒ ì‹¤í–‰
- ê²°ê³¼ê°€ ì•„ì›ƒë¼ì´ì–´ì˜ ì˜í–¥ì„ ë°›ì§€ ì•Šë„ë¡ í‰ê· ì´ ì•„ë‹Œ ê° í…ŒìŠ¤íŠ¸ ê²°ê³¼ì˜ ì¤‘ì•™ê°’ì„ ì‚¬ìš©

ë°ì´í„°
- 2.0 ~ 113.0 ë²”ìœ„ì˜ ëœë¤í•˜ê²Œ ë½‘ì€ 1ì°¨ì› ë°°ì—´ì¸ ```fahrenheit```
- 2.0 ~ 113.0 ë²”ìœ„ì˜ ëœë¤í•˜ê²Œ ë½‘ì€ 2ì°¨ì› ë°°ì—´ì¸ ```fahrenheits```

ğŸ“š __Map__

- ì‹¤í—˜ ë‚´ìš©
    - í™”ì”¨ ì˜¨ë„ê°€ ì €ì¥ëœ ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ ì„­ì”¨ ì˜¨ë„ë¡œ ë³€í™˜í•œë‹¤. 
    - ì´ ë•Œ Map í•¨ìˆ˜ì™€ for-in ë£¨í”„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

- ì‹¤í–‰ ì½”ë“œ
    ```swift
    // Swift
    let celsius = fahrenheit.map { (degreesFahrenheit) -> Double in
        return (degreesFahrenheit - 32.0) / 1.8
    }

    // For-in loop
    var celsius = [Double]()
    for degreesFahrenheit in fahrenheit {
        celsius.append((degreesFahrenheit - 32.0) / 1.8)
    }
    ```

- ê²°ê³¼
    
    <img src="https://miro.medium.com/max/1400/1*uhkm65BOMk5pHl6QSWDIXA.png" style="width: 480px"/>

    - map í•¨ìˆ˜ê°€ for-in ë£¨í”„ë³´ë‹¤ ë¹ ë¥´ë‹¤. ë‘˜ì˜ ì°¨ì´ëŠ” ì•½ 1.63ë°°.
    - map > for-in

ğŸ“š __Filter__

- ì‹¤í—˜ ë‚´ìš©
    - ì„­ì”¨ 20ë„(í™”ì”¨ 68ë„) ì´í•˜ì˜ ê¸°ì˜¨ì„ 'ì¶”ìš´ ê¸°ì˜¨'ìœ¼ë¡œ ê°€ì •í•œë‹¤.
    - í™”ì”¨ ì˜¨ë„ì˜ ë°°ì—´ì—ì„œ 'ì¶”ìš´ ê¸°ì˜¨'ì„ ê±¸ëŸ¬ë‚¸ë‹¤.
    - ì´ ë•Œ Filter í•¨ìˆ˜ì™€ for-in ë£¨í”„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

- ì‹¤í–‰ ì½”ë“œ
    ```swift
    // Swift
    let colds = fahrenheit.filter { (degreesFahrenheit) -> Bool in
        return degreesFahrenheit <= 68.0
    }

    // For-in loop
    var colds = [Double]()     
    for degreesFahrenheit in fahrenheit {
        if degreesFahrenheit <= 68.0 {
            colds.append(degreesFahrenheit)
        }
    }
    ```

- ê²°ê³¼

    <img src="https://miro.medium.com/max/1400/1*CIJhb58VjXTJFGzK_srQ2A.png" style="width: 480px"/>

    - filterì™€ for-in ë£¨í”„ì˜ ì°¨ì´ëŠ” ëª…í™•í•˜ì§€ ì•Šë‹¤. filter í•¨ìˆ˜ê°€ for-in ë£¨í”„ë³´ë‹¤ ë¯¸ì„¸í•˜ê²Œ(1.11ë°°) ë” ë¹ ë¥´ë‹¤.
    - filter >= for-in


ğŸ“š __Reduce__

- ì‹¤í—˜ ë‚´ìš©
    - ë°°ì—´ ë‚´ ëª¨ë“  ìš”ì†Œë“¤ì„ ë”í•˜ê³  ê·¸ ì†ë„ë¥¼ ë¹„êµí•œë‹¤.
    - ì´ ë•Œ Reduce í•¨ìˆ˜ì™€ for-in ë£¨í”„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

- ì‹¤í–‰ ì½”ë“œ
    ```swift
    // Swift
    let sum = fahrenheit.reduce(0.0) { (result, degreesFahrenheit) -> Double in
        return result + degreesFahrenheit
    }

    // For-in loop
    var sum: Double = 0.0
            
    for degreesFahrenheit in fahrenheit {
        sum += degreesFahrenheit
    }
    ```

- ê²°ê³¼

    <img src="https://miro.medium.com/max/1400/1*PvMi5yi1ILeF3ewGKk2m-A.png" style="width: 480px"/>
    - for-inë£¨í”„ë³´ë‹¤ reduceê°€ ì¡°ê¸ˆ ë” ì˜¤ë˜ ê±¸ë¦°ë‹¤.
    - ë‘˜ì˜ ì°¨ì´ëŠ” ì•½ 1.05ë°°
    - for-in >= reduce


ğŸ“š __FlatMap__
- ì‹¤í—˜ ë‚´ìš©
    - 2ì°¨ì› ë°°ì—´ì¸ fahrenheits ë°°ì—´ì„ 1ì°¨ì› ë°°ì—´ë¡œ í’€ì–´ì¤€ë‹¤.
    - ì´ ë•Œ FlatMap í•¨ìˆ˜ì™€ for-in ë£¨í”„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

- ì‹¤í–‰ ì½”ë“œ
    ```swift
    // Swift
    let fahrenheit = fahrenheits.flatMap({ (fahrenheit) -> [Double] in
        return fahrenheit
    })

    // For-in loop
    var fahrenheit = [Double]()
            
    for lFahrenheit in fahrenheits {
        fahrenheit.append(contentsOf: lFahrenheit)
    }
    ```

- ê²°ê³¼
    <img src="https://miro.medium.com/max/1400/1*tLDBmwNXJgrVS_CK-0iI2g.png" style="width: 480px"/>
    - reduceì™€ ë¹„ìŠ·í•¨.
    - for-in >= flatMap


ğŸ“š __Chaining__

- ì‹¤í—˜ ë‚´ìš©
    - 1ì°¨ì› ë°°ì—´ fahrenheitë¥¼ ì„­ì”¨ ì˜¨ë„ë¡œ ë³€í™˜í•˜ê³ ,
    - ë³€í™˜ëœ ë°°ì—´ì—ì„œ 'ì¶”ìš´ ê¸°ì˜¨'ì„ í•„í„°ë§í•œ ë‹¤ìŒ,
    - í•„í„°ë§ëœ ê°’ë“¤ì„ ëª¨ë‘ ë”í•œë‹¤.
    - ë™ì¼í•œ ì—­í• ì„ í•˜ëŠ” ì½”ë“œë¥¼ for-in ë£¨í”„ë¡œ êµ¬í˜„í•˜ê³  ì´ ë•Œ ê³ ì°¨í•¨ìˆ˜ Chainingê³¼ for-in ë£¨í”„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.
- ì‹¤í–‰ ì½”ë“œ
    ```swift
    // Swift
    let sum = fahrenheit.map({ (degreesFahrenheit) -> Double in
        return (degreesFahrenheit - 32.0) / 1.8
    }).filter({ (degreesCelsius) -> Bool in
        return degreesCelsius <= 20.0
    }).reduce(0.0) { (result, degreesCelsius) -> Double in
        return result + degreesCelsius
    }

    // For-in loop
    var sum: Double = 0.0
            
    for degreesFahrenheit in fahrenheit {
        let degreesCelsius = (degreesFahrenheit - 32.0) / 1.8
        if degreesCelsius <= 20.0 {
            sum += degreesCelsius
        }
    }
    ```

- ê²°ê³¼
    <img src="https://miro.medium.com/max/1400/1*2FzGWMolPewP0H2GrkawuQ.png" style="width: 480px"/>
    - ê³ ì°¨í•¨ìˆ˜ ì²´ì´ë‹ ë°©ì‹ì˜ ìˆ˜í–‰ì‹œê°„ì´ for-in ë£¨í”„ì˜ ìˆ˜í–‰ì‹œê°„ì˜ 2.37ë°°
    - ê° í•¨ìˆ˜ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ê° ê³ ì°¨í•¨ìˆ˜ë§ˆë‹¤ O(n)ì˜ ì‹œê°„ì„ ê°€ì ¸ ì´ O(3n)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ê²Œ ë¨.
    - ë°˜ë©´ì— for-in ë£¨í”„ëŠ” í•˜ë‚˜ì˜ ë£¨í”„ ë‚´ì—ì„œ í•„ìš”í•œ ëª¨ë“  ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì—, ì‹œê°„ ë³µì¡ë„ëŠ” O(n)ì´ ëœë‹¤.
    - í•¨ìˆ˜ ì²´ì´ë‹ì„ í†µí•´ êµ¬í˜„ì´ í•„ìš”í•  ë•Œ ë‚´ì¥ ê³ ì°¨í•¨ìˆ˜ë¥¼ í”¼í•˜ê³  for-in ë£¨í”„ë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
